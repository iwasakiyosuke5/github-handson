<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
<title>ã˜ã‚ƒã‚“ã‘ã‚“</title>
</head>
<body>

<header>
  <h1>ã˜ã‚ƒã‚“ã‘ã‚“</h1>
  <h3>7å›å¯¾æˆ¦ã—ã¦å‹ç‡<span>50%</span>ã‚’ç›®æŒ‡ã—ãã†ï¼</h3>
</header>

<main>
  <div class="jankenN">å¯¾æˆ¦å›æ•°ï¼š<span id="jankenN">0å›</div>
  <div class="Evaluation"><span id="winParImg"></div>
  <div class="enemyHP">enemyHP:<span id="enemyHP"></div>

  <ul>
    <li id="gu_btn">ã‚°ãƒ¼âœŠ</li>
    <li id="cho_btn">ãƒãƒ§ã‚­âœŒï¸</li>
    <li id="par_btn">ãƒ‘ãƒ¼ğŸ–ï¸</li>
  </ul>
  <div class="vsHand">
    <div>å¯¾æˆ¦ç›¸æ‰‹ã®æ‰‹ã¯</div>
    <div id="pc_hands">ãªã«ï¼Ÿ</div>    
  </div>
  <div class="judgment">åˆ¤å®šï¼š<span id="judgment">-</div>
  <div class="results">
      <div class="result">å‹ã¡æ•°ï¼š<span id="winN">0å›</div>
      <div class="result">å¼•ãåˆ†ã‘æ•°ï¼š<span id="evenN">0å›</div>
      <div class="result">è² ã‘æ•°ï¼š<span id="loseN">0å›</div>
  </div>
  <div class="winRate">å‹ç‡ï¼š<span id="winParcent">-%</div>
  <div class="center"><button id="endBtn" style="display: none">çµ‚äº†ã™ã‚‹</button></div>
</main>
  
<footer class="footer">
  <p>copyrights jajankenkyokai.</p>
</footer>



<script>
//ã˜ã‚ƒã‚“ã‘ã‚“ç”¨ã®SCRIPTã‚’æ›¸ã„ã¦ãã ã•ã„
let winN = 0;
let evenN = 0;
let loseN = 0;
let gameN = 0;
let enemyHP = 200;
$("#enemyHP").html(enemyHP);


$("#gu_btn").on("click",function() {
  
  const a = Math.ceil(Math.random()*3)
  $("#cho_btn, #par_btn").css("filter", "blur(5px)");
  setTimeout(function() {
    $("#cho_btn, #par_btn").css("filter", "");
  }, 400); 

  if(a === 1){
    // console.log("good");
    winN++;
    $("#pc_hands").html('<img src="./img/cho.png">');
    setTimeout(function() {
    $("#judgment").html("ã‹ã¡");
    $("#winN").html(winN + "å›");
    // console.log(winN + "å›");
    }, 400); 
    // $("#judgment").html("ã‹ã¡");
    
    
  }else if(a === 2){
    // console.log("even");
    evenN++;
    $("#pc_hands").html('<img src="./img/gu.png">');
    setTimeout(function() {
    $("#judgment").html("å¼•ãåˆ†ã‘");
    $("#evenN").html(evenN + "å›");
    // console.log(evenN + "å›");
    }, 400); 
    // $("#judgment").html("å¼•ãåˆ†ã‘");
    
    
  }else{
    // console.log("bad");
    loseN++;
    $("#pc_hands").html('<img src="./img/par.png">');
    setTimeout(function() {
    $("#judgment").html("è² ã‘");
    $("#loseN").html(loseN + "å›");
    // console.log(loseN + "å›");
    }, 400); 

    // $("#judgment").html("è² ã‘");
  };
  

});

$("#cho_btn").on("click",function() {
  
  const a = Math.ceil(Math.random()*3)
  $("#gu_btn, #par_btn").css("filter", "blur(5px)");
  setTimeout(function() {
    $("#gu_btn, #par_btn").css("filter", "");
  }, 400); 
  

  if(a === 1){
    // console.log("good");
    winN++;
    $("#pc_hands").html('<img src="./img/par.png">');
    setTimeout(function() {
    $("#judgment").html("ã‹ã¡");
    $("#winN").html(winN + "å›");
    // console.log(winN + "å›");
    }, 400);
    

  }else if(a === 2){
    // console.log("even");
    evenN++;
    $("#pc_hands").html('<img src="./img/cho.png">');
    setTimeout(function() {
    $("#judgment").html("å¼•ãåˆ†ã‘");
    $("#evenN").html(evenN + "å›");
    // console.log(evenN + "å›");
    }, 400); 
    
  }else{
    // console.log("bad");
    loseN++;
    $("#pc_hands").html('<img src="./img/gu.png">');
    setTimeout(function() {
    $("#judgment").html("è² ã‘");
    $("#loseN").html(loseN + "å›");
    // console.log(loseN + "å›");
    }, 400); 
  };
  

});

$("#par_btn").on("click",function() {
  
  const a = Math.ceil(Math.random()*3)
  $("#cho_btn, #gu_btn").css("filter", "blur(5px)");
  setTimeout(function() {
    $("#cho_btn, #gu_btn").css("filter", "");
  }, 400); 
  

  if(a === 1){
    // console.log("good");
    winN++;
    $("#pc_hands").html('<img src="./img/gu.png">');
    setTimeout(function() {
    $("#judgment").html("ã‹ã¡");
    $("#winN").html(winN + "å›");
    // console.log(winN + "å›");
    }, 400);

  }else if(a === 2){
    // console.log("even");
    evenN++;
    $("#pc_hands").html('<img src="./img/par.png">');
    setTimeout(function() {
    $("#judgment").html("å¼•ãåˆ†ã‘");
    $("#evenN").html(evenN + "å›");
    // console.log(evenN + "å›");
    }, 400); 
    
  }else{
    // console.log("bad");
    loseN++;
    $("#pc_hands").html('<img src="./img/cho.png">');
    setTimeout(function() {
    $("#judgment").html("è² ã‘");
    $("#loseN").html(loseN + "å›");
    // console.log(loseN + "å›");
    }, 400); 
  };
  
});



$("#gu_btn, #cho_btn, #par_btn").on("click",function() {
  gameN++;
  // console.log("gameN:" + gameN);
  $("#jankenN").html(gameN + `å›`);
  
  finalParcent = (winN / gameN * 100).toFixed(1); // finalParcentã«å€¤ã‚’ä»£å…¥

  // console.log(finalParcent + "%");
  setTimeout(function() {
    $("#winParcent").html(finalParcent + "%");
  }, 400);

  if (gameN === 7 && winN / gameN * 100 >= 50) {
    setTimeout(function() {
      $("#winParImg").html("ãŠã‚ã§ã¨ã†");
    }, 400);

  } else if (gameN === 7 && winN / gameN * 100 >= 30) {
    setTimeout(function() {
      $("#winParImg").html("ã‚ã¨ã‚‚ã†å°‘ã—");
    }, 400);

  } else if (gameN === 7 && winN / gameN * 100 < 30) {
    setTimeout(function() {
      $("#winParImg").html("æ®‹å¿µ");
    }, 400);

  } else {
    $("#winParImg").html("æ®‹ã‚Š" + (7 - gameN) + "å›");
  };

  if (gameN === 7) {
    document.getElementById("gu_btn").style.pointerEvents = "none";
    document.getElementById("cho_btn").style.pointerEvents = "none";
    document.getElementById("par_btn").style.pointerEvents = "none";
    setTimeout(function() {
      $("#endBtn").css("display", "block");
    }, 400);
  }

});

let winParcentList = [];

let finalParcent = 0; // åˆæœŸå€¤ã‚’è¨­å®š

$("#endBtn").on("click", function() {
  winN = 0;
  evenN = 0;
  loseN = 0;
  gameN = 0;
  jankenN = 0;
  let sum = 0;
  
  winParcentList.push(finalParcent);
  // console.log(winParcentList);
  
  let footerHTML = "å‹ç‡è¨˜éŒ²ï¼š" + winParcentList.join("%, ") + "%";
  $("footer").html(footerHTML);  



  $("#pc_hands").html("ãªã«ï¼Ÿ");
  $("#judgment").html("-");
  $("#jankenN").html(jankenN + "å›");
  $("#winN").html(winN + "å›");
  $("#evenN").html(evenN + "å›");
  $("#loseN").html(loseN + "å›");
  $("#gameN").html(gameN + "å›");
  $("#winParcent").html("0%");
  $("#winParImg").html("");
  $("#endBtn").css("display", "none");
  document.getElementById("gu_btn").style.pointerEvents = "auto";
  document.getElementById("cho_btn").style.pointerEvents = "auto";
  document.getElementById("par_btn").style.pointerEvents = "auto";
    
    for (let index = 0; index < winParcentList.length; index += 1){
      let item = winParcentList[index];
      
      sum += parseFloat(item); 
      console.log("item:", item)
      console.log("sum:", sum)
      console.log("finalParcent:", finalParcent);
      console.log("finalParcent is a number:", !isNaN(finalParcent));
      console.log(item);
      // ãƒ•ãƒƒã‚¿ãƒ¼ã«å‹ç‡ã‚’è¡¨ç¤º
    };

  


  let average = (sum / winParcentList.length).toFixed(1);
  console.log("Average", average);
    
  enemyHP = (200 - sum).toFixed(1);
  $("#enemyHP").html(enemyHP);
  console.log("æ®‹ã‚ŠHP:", enemyHP);


    // averageã‚’åˆ†è§£ã—ã¦ãã‚Œãã‚Œæ•´æ•°å€¤ã¨ã—ã¦ä¸ãˆç›´ã™ã€‚
    let tensDigit = Math.floor(average / 10);

    // ä¸€ã®ä½ã‚’å–å¾—
    let onesDigit = Math.floor(average) % 10;

    // å°æ•°ç‚¹ä»¥ä¸‹ã®ä¸€ã®ä½ã‚’å–å¾—
    let onesDecimalDigit = Math.floor((average - Math.floor(average)) * 10);

    // çµæœã‚’å‡ºåŠ›
    // console.log("tensDigit:", tensDigit);
    // console.log("onesDigit:", onesDigit);
    // console.log("onesDecimalDigit:", onesDecimalDigit);
    let finalAtack = tensDigit * onesDigit * onesDecimalDigit;
    // console.log("finalAtack:", finalAtack);
    
    FinalHP = enemyHP - finalAtack;
    console.log("æœ€çµ‚HP:", FinalHP);

    
});

  


</script>
</body>
</html>
